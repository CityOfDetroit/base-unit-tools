import{g6 as $i}from"./index-DPsNinHg.js";const Yi=512,Ji=29,Xi=24;var N;(function(i){i[i.FilterFlags=0]="FilterFlags",i[i.Animation=1]="Animation",i[i.GPGPU=2]="GPGPU",i[i.VV=3]="VV",i[i.DD0=4]="DD0",i[i.DD1=5]="DD1",i[i.DD2=6]="DD2"})(N||(N={}));const Zi=1.05,Ki=2,Qi=10,ji=256,it=32,tt=512;var D,v,O,A,E,w,F,I,$,W,b,U,k,H,G,q,V,z,Y,J,X,Z,K,Q,j,ii,ti,ni,si,ei,hi,ri,oi,li,ai,ui,ci,_i,xi,yi,fi,di,pi,mi,gi,Ti,Pi,Ci,Si,Ri,Mi,Li,Bi,Ni,Di,vi,Oi,Ai,Ei,wi,Fi;(function(i){i[i.BUTT=0]="BUTT",i[i.ROUND=1]="ROUND",i[i.SQUARE=2]="SQUARE",i[i.UNKNOWN=4]="UNKNOWN"})(D||(D={})),function(i){i[i.BEVEL=0]="BEVEL",i[i.ROUND=1]="ROUND",i[i.MITER=2]="MITER",i[i.UNKNOWN=4]="UNKNOWN"}(v||(v={})),function(i){i[i.SCREEN=0]="SCREEN",i[i.MAP=1]="MAP"}(O||(O={})),function(i){i[i.Tint=0]="Tint",i[i.Ignore=1]="Ignore",i[i.Multiply=99]="Multiply"}(A||(A={})),function(i){i.Both="Both",i.JustBegin="JustBegin",i.JustEnd="JustEnd",i.None="None"}(E||(E={})),function(i){i[i.Mosaic=0]="Mosaic",i[i.Centered=1]="Centered"}(w||(w={})),function(i){i[i.Normal=0]="Normal",i[i.Superscript=1]="Superscript",i[i.Subscript=2]="Subscript"}(F||(F={})),function(i){i[i.MSSymbol=0]="MSSymbol",i[i.Unicode=1]="Unicode"}(I||(I={})),function(i){i[i.Unspecified=0]="Unspecified",i[i.TrueType=1]="TrueType",i[i.PSOpenType=2]="PSOpenType",i[i.TTOpenType=3]="TTOpenType",i[i.Type1=4]="Type1"}($||($={})),function(i){i[i.Display=0]="Display",i[i.Map=1]="Map"}(W||(W={})),function(i){i.None="None",i.Loop="Loop",i.Oscillate="Oscillate"}(b||(b={})),function(i){i[i.Z=0]="Z",i[i.X=1]="X",i[i.Y=2]="Y"}(U||(U={})),function(i){i[i.XYZ=0]="XYZ",i[i.ZXY=1]="ZXY",i[i.YXZ=2]="YXZ"}(k||(k={})),function(i){i[i.Rectangle=0]="Rectangle",i[i.RoundedRectangle=1]="RoundedRectangle",i[i.Oval=2]="Oval"}(H||(H={})),function(i){i[i.None=0]="None",i[i.Alpha=1]="Alpha",i[i.Screen=2]="Screen",i[i.Multiply=3]="Multiply",i[i.Add=4]="Add"}(G||(G={})),function(i){i[i.TTB=0]="TTB",i[i.RTL=1]="RTL",i[i.BTT=2]="BTT"}(q||(q={})),function(i){i[i.None=0]="None",i[i.SignPost=1]="SignPost",i[i.FaceNearPlane=2]="FaceNearPlane"}(V||(V={})),function(i){i[i.Float=0]="Float",i[i.String=1]="String",i[i.Boolean=2]="Boolean"}(z||(z={})),function(i){i[i.Intersect=0]="Intersect",i[i.Subtract=1]="Subtract"}(Y||(Y={})),function(i){i.OpenEnded="OpenEnded",i.Block="Block",i.Crossed="Crossed"}(J||(J={})),function(i){i.FullGeometry="FullGeometry",i.PerpendicularFromFirstSegment="PerpendicularFromFirstSegment",i.ReversedFirstSegment="ReversedFirstSegment",i.PerpendicularToSecondSegment="PerpendicularToSecondSegment",i.SecondSegmentWithTicks="SecondSegmentWithTicks",i.DoublePerpendicular="DoublePerpendicular",i.OppositeToFirstSegment="OppositeToFirstSegment",i.TriplePerpendicular="TriplePerpendicular",i.HalfCircleFirstSegment="HalfCircleFirstSegment",i.HalfCircleSecondSegment="HalfCircleSecondSegment",i.HalfCircleExtended="HalfCircleExtended",i.OpenCircle="OpenCircle",i.CoverageEdgesWithTicks="CoverageEdgesWithTicks",i.GapExtentWithDoubleTicks="GapExtentWithDoubleTicks",i.GapExtentMidline="GapExtentMidline",i.Chevron="Chevron",i.PerpendicularWithArc="PerpendicularWithArc",i.ClosedHalfCircle="ClosedHalfCircle",i.TripleParallelExtended="TripleParallelExtended",i.ParallelWithTicks="ParallelWithTicks",i.Parallel="Parallel",i.PerpendicularToFirstSegment="PerpendicularToFirstSegment",i.ParallelOffset="ParallelOffset",i.OffsetOpposite="OffsetOpposite",i.OffsetSame="OffsetSame",i.CircleWithArc="CircleWithArc",i.DoubleJog="DoubleJog",i.PerpendicularOffset="PerpendicularOffset",i.LineExcludingLastSegment="LineExcludingLastSegment",i.MultivertexArrow="MultivertexArrow",i.CrossedArrow="CrossedArrow",i.ChevronArrow="ChevronArrow",i.ChevronArrowOffset="ChevronArrowOffset",i.PartialFirstSegment="PartialFirstSegment",i.Arch="Arch",i.CurvedParallelTicks="CurvedParallelTicks",i.Arc90Degrees="Arc90Degrees",i.TipWithPerpendicularAndTicks="TipWithPerpendicularAndTicks"}(X||(X={})),function(i){i.Mitered="Mitered",i.Bevelled="Bevelled",i.Rounded="Rounded",i.Square="Square",i.TrueBuffer="TrueBuffer"}(Z||(Z={})),function(i){i.ClosePath="ClosePath",i.ConvexHull="ConvexHull",i.RectangularBox="RectangularBox"}(K||(K={})),function(i){i.BeginningOfLine="BeginningOfLine",i.EndOfLine="EndOfLine"}(Q||(Q={})),function(i){i.Mitered="Mitered",i.Bevelled="Bevelled",i.Rounded="Rounded",i.Square="Square"}(j||(j={})),function(i){i.Fast="Fast",i.Accurate="Accurate"}(ii||(ii={})),function(i){i.BeginningOfLine="BeginningOfLine",i.EndOfLine="EndOfLine"}(ti||(ti={})),function(i){i.Sinus="Sinus",i.Square="Square",i.Triangle="Triangle",i.Random="Random"}(ni||(ni={})),function(i){i[i.None=0]="None",i[i.Default=1]="Default",i[i.Force=2]="Force"}(si||(si={})),function(i){i[i.Buffered=0]="Buffered",i[i.Left=1]="Left",i[i.Right=2]="Right",i[i.AlongLine=3]="AlongLine"}(ei||(ei={})),function(i){i[i.Linear=0]="Linear",i[i.Rectangular=1]="Rectangular",i[i.Circular=2]="Circular",i[i.Buffered=3]="Buffered"}(hi||(hi={})),function(i){i[i.Discrete=0]="Discrete",i[i.Continuous=1]="Continuous"}(ri||(ri={})),function(i){i[i.AcrossLine=0]="AcrossLine",i[i.AloneLine=1]="AloneLine"}(oi||(oi={})),function(i){i[i.Left=0]="Left",i[i.Right=1]="Right",i[i.Center=2]="Center",i[i.Justify=3]="Justify"}(li||(li={})),function(i){i[i.Base=0]="Base",i[i.MidPoint=1]="MidPoint",i[i.ThreePoint=2]="ThreePoint",i[i.FourPoint=3]="FourPoint",i[i.Underline=4]="Underline",i[i.CircularCW=5]="CircularCW",i[i.CircularCCW=6]="CircularCCW"}(ai||(ai={})),function(i){i.Butt="Butt",i.Round="Round",i.Square="Square"}(ui||(ui={})),function(i){i.NoConstraint="NoConstraint",i.HalfPattern="HalfPattern",i.HalfGap="HalfGap",i.FullPattern="FullPattern",i.FullGap="FullGap",i.Custom="Custom"}(ci||(ci={})),function(i){i[i.None=-1]="None",i[i.Custom=0]="Custom",i[i.Circle=1]="Circle",i[i.OpenArrow=2]="OpenArrow",i[i.ClosedArrow=3]="ClosedArrow",i[i.Diamond=4]="Diamond"}(_i||(_i={})),function(i){i[i.ExtraLeading=0]="ExtraLeading",i[i.Multiple=1]="Multiple",i[i.Exact=2]="Exact"}(xi||(xi={})),function(i){i.Bevel="Bevel",i.Round="Round",i.Miter="Miter"}(yi||(yi={})),function(i){i[i.Default=0]="Default",i[i.String=1]="String",i[i.Numeric=2]="Numeric"}(fi||(fi={})),function(i){i[i.InsidePolygon=0]="InsidePolygon",i[i.PolygonCenter=1]="PolygonCenter",i[i.RandomlyInsidePolygon=2]="RandomlyInsidePolygon"}(di||(di={})),function(i){i[i.Tint=0]="Tint",i[i.Replace=1]="Replace",i[i.Multiply=2]="Multiply"}(pi||(pi={})),function(i){i[i.ClipAtBoundary=0]="ClipAtBoundary",i[i.RemoveIfCenterOutsideBoundary=1]="RemoveIfCenterOutsideBoundary",i[i.DoNotTouchBoundary=2]="DoNotTouchBoundary",i[i.DoNotClip=3]="DoNotClip"}(mi||(mi={})),function(i){i.NoConstraint="NoConstraint",i.WithMarkers="WithMarkers",i.WithFullGap="WithFullGap",i.WithHalfGap="WithHalfGap",i.Custom="Custom"}(gi||(gi={})),function(i){i.Fixed="Fixed",i.Random="Random",i.RandomFixedQuantity="RandomFixedQuantity"}(Ti||(Ti={})),function(i){i.LineMiddle="LineMiddle",i.LineBeginning="LineBeginning",i.LineEnd="LineEnd",i.SegmentMidpoint="SegmentMidpoint"}(Pi||(Pi={})),function(i){i.OnPolygon="OnPolygon",i.CenterOfMass="CenterOfMass",i.BoundingBoxCenter="BoundingBoxCenter"}(Ci||(Ci={})),function(i){i[i.Low=0]="Low",i[i.Medium=1]="Medium",i[i.High=2]="High"}(Si||(Si={})),function(i){i[i.MarkerCenter=0]="MarkerCenter",i[i.MarkerBounds=1]="MarkerBounds"}(Ri||(Ri={})),function(i){i[i.None=0]="None",i[i.PropUniform=1]="PropUniform",i[i.PropNonuniform=2]="PropNonuniform",i[i.DifUniform=3]="DifUniform",i[i.DifNonuniform=4]="DifNonuniform"}(Mi||(Mi={})),function(i){i.Tube="Tube",i.Strip="Strip",i.Wall="Wall"}(Li||(Li={})),function(i){i[i.Random=0]="Random",i[i.Increasing=1]="Increasing",i[i.Decreasing=2]="Decreasing",i[i.IncreasingThenDecreasing=3]="IncreasingThenDecreasing"}(Bi||(Bi={})),function(i){i[i.Relative=0]="Relative",i[i.Absolute=1]="Absolute"}(Ni||(Ni={})),function(i){i[i.Normal=0]="Normal",i[i.LowerCase=1]="LowerCase",i[i.Allcaps=2]="Allcaps"}(Di||(Di={})),function(i){i[i.LTR=0]="LTR",i[i.RTL=1]="RTL"}(vi||(vi={})),function(i){i.Draft="Draft",i.Picture="Picture",i.Text="Text"}(Oi||(Oi={})),function(i){i[i.Top=0]="Top",i[i.Center=1]="Center",i[i.Baseline=2]="Baseline",i[i.Bottom=3]="Bottom"}(Ai||(Ai={})),function(i){i[i.Right=0]="Right",i[i.Upright=1]="Upright"}(Ei||(Ei={})),function(i){i[i.Small=0]="Small",i[i.Medium=1]="Medium",i[i.Large=2]="Large"}(wi||(wi={})),function(i){i[i.Calm=0]="Calm",i[i.Rippled=1]="Rippled",i[i.Slight=2]="Slight",i[i.Moderate=3]="Moderate"}(Fi||(Fi={}));const Wi=512;var T,p;(function(i){i[i.Unknown=0]="Unknown",i[i.Point=1]="Point",i[i.LineString=2]="LineString",i[i.Polygon=3]="Polygon"})(T||(T={}));let m=class L{constructor(t,n){this.x=t,this.y=n}clone(){return new L(this.x,this.y)}equals(t,n){return t===this.x&&n===this.y}isEqual(t){return t.x===this.x&&t.y===this.y}setCoords(t,n){return this.x=t,this.y=n,this}normalize(){const t=this.x,n=this.y,s=Math.sqrt(t*t+n*n);return this.x/=s,this.y/=s,this}rightPerpendicular(){const t=this.x;return this.x=this.y,this.y=-t,this}leftPerpendicular(){const t=this.x;return this.x=-this.y,this.y=t,this}move(t,n){return this.x+=t,this.y+=n,this}assign(t){return this.x=t.x,this.y=t.y,this}assignAdd(t,n){return this.x=t.x+n.x,this.y=t.y+n.y,this}assignSub(t,n){return this.x=t.x-n.x,this.y=t.y-n.y,this}rotate(t,n){const s=this.x,e=this.y;return this.x=s*t-e*n,this.y=s*n+e*t,this}scale(t){return this.x*=t,this.y*=t,this}length(){const t=this.x,n=this.y;return Math.sqrt(t*t+n*n)}sub(t){return this.x-=t.x,this.y-=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}static distance(t,n){const s=n.x-t.x,e=n.y-t.y;return Math.sqrt(s*s+e*e)}static add(t,n){return new L(t.x+n.x,t.y+n.y)}static sub(t,n){return new L(t.x-n.x,t.y-n.y)}};class R{constructor(t,n,s){this.ratio=t,this.x=n,this.y=s}}let nt=class{constructor(t,n,s,e=8,r=8){this._lines=[],this._starts=[],this.validateTessellation=!0,this._pixelRatio=e,this._pixelMargin=r,this._tileSize=Wi*e,this._dz=t,this._yPos=n,this._xPos=s}setPixelMargin(t){t!==this._pixelMargin&&(this._pixelMargin=t,this.setExtent(this._extent))}setExtent(t){this._extent=t,this._finalRatio=this._tileSize/t*(1<<this._dz);let n=this._pixelRatio*this._pixelMargin;n/=this._finalRatio;const s=t>>this._dz;n>s&&(n=s),this._margin=n,this._xmin=s*this._xPos-n,this._ymin=s*this._yPos-n,this._xmax=this._xmin+s+2*n,this._ymax=this._ymin+s+2*n}reset(t){this._type=t,this._lines=[],this._starts=[],this._line=null,this._start=0}moveTo(t,n){this._pushLine(),this._prevIsIn=this._isIn(t,n),this._moveTo(t,n,this._prevIsIn),this._prevPt=new m(t,n),this._firstPt=new m(t,n),this._dist=0}lineTo(t,n){const s=this._isIn(t,n),e=new m(t,n),r=m.distance(this._prevPt,e);let h,l,o,a,g,y,_,d;if(s)this._prevIsIn?this._lineTo(t,n,!0):(h=this._prevPt,l=e,o=this._intersect(l,h),this._start=this._dist+r*(1-this._r),this._lineTo(o.x,o.y,!0),this._lineTo(l.x,l.y,!0));else if(this._prevIsIn)l=this._prevPt,h=e,o=this._intersect(l,h),this._lineTo(o.x,o.y,!0),this._lineTo(h.x,h.y,!1);else{const u=this._prevPt,c=e;if(u.x<=this._xmin&&c.x<=this._xmin||u.x>=this._xmax&&c.x>=this._xmax||u.y<=this._ymin&&c.y<=this._ymin||u.y>=this._ymax&&c.y>=this._ymax)this._lineTo(c.x,c.y,!1);else{const f=[];if((u.x<this._xmin&&c.x>this._xmin||u.x>this._xmin&&c.x<this._xmin)&&(a=(this._xmin-u.x)/(c.x-u.x),d=u.y+a*(c.y-u.y),d<=this._ymin?y=!1:d>=this._ymax?y=!0:f.push(new R(a,this._xmin,d))),(u.x<this._xmax&&c.x>this._xmax||u.x>this._xmax&&c.x<this._xmax)&&(a=(this._xmax-u.x)/(c.x-u.x),d=u.y+a*(c.y-u.y),d<=this._ymin?y=!1:d>=this._ymax?y=!0:f.push(new R(a,this._xmax,d))),(u.y<this._ymin&&c.y>this._ymin||u.y>this._ymin&&c.y<this._ymin)&&(a=(this._ymin-u.y)/(c.y-u.y),_=u.x+a*(c.x-u.x),_<=this._xmin?g=!1:_>=this._xmax?g=!0:f.push(new R(a,_,this._ymin))),(u.y<this._ymax&&c.y>this._ymax||u.y>this._ymax&&c.y<this._ymax)&&(a=(this._ymax-u.y)/(c.y-u.y),_=u.x+a*(c.x-u.x),_<=this._xmin?g=!1:_>=this._xmax?g=!0:f.push(new R(a,_,this._ymax))),f.length===0)g?y?this._lineTo(this._xmax,this._ymax,!0):this._lineTo(this._xmax,this._ymin,!0):y?this._lineTo(this._xmin,this._ymax,!0):this._lineTo(this._xmin,this._ymin,!0);else if(f.length>1&&f[0].ratio>f[1].ratio)this._start=this._dist+r*f[1].ratio,this._lineTo(f[1].x,f[1].y,!0),this._lineTo(f[0].x,f[0].y,!0);else{this._start=this._dist+r*f[0].ratio;for(let x=0;x<f.length;x++)this._lineTo(f[x].x,f[x].y,!0)}this._lineTo(c.x,c.y,!1)}}this._dist+=r,this._prevIsIn=s,this._prevPt=e}close(){if(this._line.length>2){const t=this._firstPt,n=this._prevPt;t.x===n.x&&t.y===n.y||this.lineTo(t.x,t.y);const s=this._line;let e=s.length;for(;e>=4&&(s[0].x===s[1].x&&s[0].x===s[e-2].x||s[0].y===s[1].y&&s[0].y===s[e-2].y);)s.pop(),s[0].x=s[e-2].x,s[0].y=s[e-2].y,--e}}result(t=!0){return this._pushLine(),this._lines.length===0?null:(this._type===T.Polygon&&t&&bi.simplify(this._tileSize,this._margin*this._finalRatio,this._lines),this._lines)}resultWithStarts(){if(this._type!==T.LineString)throw new Error("Only valid for lines");this._pushLine();const t=this._lines,n=t.length;if(n===0)return null;const s=[];for(let e=0;e<n;e++)s.push({line:t[e],start:this._starts[e]||0});return s}_isIn(t,n){return t>=this._xmin&&t<=this._xmax&&n>=this._ymin&&n<=this._ymax}_intersect(t,n){let s,e,r;if(n.x>=this._xmin&&n.x<=this._xmax)e=n.y<=this._ymin?this._ymin:this._ymax,r=(e-t.y)/(n.y-t.y),s=t.x+r*(n.x-t.x);else if(n.y>=this._ymin&&n.y<=this._ymax)s=n.x<=this._xmin?this._xmin:this._xmax,r=(s-t.x)/(n.x-t.x),e=t.y+r*(n.y-t.y);else{e=n.y<=this._ymin?this._ymin:this._ymax,s=n.x<=this._xmin?this._xmin:this._xmax;const h=(s-t.x)/(n.x-t.x),l=(e-t.y)/(n.y-t.y);h<l?(r=h,e=t.y+h*(n.y-t.y)):(r=l,s=t.x+l*(n.x-t.x))}return this._r=r,new m(s,e)}_pushLine(){this._line&&(this._type===T.Point?this._line.length>0&&(this._lines.push(this._line),this._starts.push(this._start)):this._type===T.LineString?this._line.length>1&&(this._lines.push(this._line),this._starts.push(this._start)):this._type===T.Polygon&&this._line.length>3&&(this._lines.push(this._line),this._starts.push(this._start))),this._line=[],this._start=0}_moveTo(t,n,s){this._type!==T.Polygon?s&&(t=Math.round((t-(this._xmin+this._margin))*this._finalRatio),n=Math.round((n-(this._ymin+this._margin))*this._finalRatio),this._line.push(new m(t,n))):(s||(t<this._xmin&&(t=this._xmin),t>this._xmax&&(t=this._xmax),n<this._ymin&&(n=this._ymin),n>this._ymax&&(n=this._ymax)),t=Math.round((t-(this._xmin+this._margin))*this._finalRatio),n=Math.round((n-(this._ymin+this._margin))*this._finalRatio),this._line.push(new m(t,n)),this._isH=!1,this._isV=!1)}_lineTo(t,n,s){let e,r;if(this._type!==T.Polygon)if(s){if(t=Math.round((t-(this._xmin+this._margin))*this._finalRatio),n=Math.round((n-(this._ymin+this._margin))*this._finalRatio),this._line.length>0&&(e=this._line[this._line.length-1],e.equals(t,n)))return;this._line.push(new m(t,n))}else this._line&&this._line.length>0&&this._pushLine();else if(s||(t<this._xmin&&(t=this._xmin),t>this._xmax&&(t=this._xmax),n<this._ymin&&(n=this._ymin),n>this._ymax&&(n=this._ymax)),t=Math.round((t-(this._xmin+this._margin))*this._finalRatio),n=Math.round((n-(this._ymin+this._margin))*this._finalRatio),this._line&&this._line.length>0){e=this._line[this._line.length-1];const h=e.x===t,l=e.y===n;if(h&&l)return;this._isH&&h||this._isV&&l?(e.x=t,e.y=n,r=this._line[this._line.length-2],r.x===t&&r.y===n?(this._line.pop(),this._line.length<=1?(this._isH=!1,this._isV=!1):(r=this._line[this._line.length-2],this._isH=r.x===t,this._isV=r.y===n)):(this._isH=r.x===t,this._isV=r.y===n)):(this._line.push(new m(t,n)),this._isH=h,this._isV=l)}else this._line.push(new m(t,n))}};class et{setExtent(t){this._ratio=t===4096?1:4096/t}get validateTessellation(){return this._ratio<1}reset(t){this._lines=[],this._line=null}moveTo(t,n){this._line&&this._lines.push(this._line),this._line=[];const s=this._ratio;this._line.push(new m(t*s,n*s))}lineTo(t,n){const s=this._ratio;this._line.push(new m(t*s,n*s))}close(){const t=this._line;t&&!t[0].isEqual(t[t.length-1])&&t.push(t[0])}result(){return this._line&&this._lines.push(this._line),this._lines.length===0?null:this._lines}}(function(i){i[i.sideLeft=0]="sideLeft",i[i.sideRight=1]="sideRight",i[i.sideTop=2]="sideTop",i[i.sideBottom=3]="sideBottom"})(p||(p={}));let bi=class P{static simplify(t,n,s){if(!s)return;const e=-n,r=t+n,h=-n,l=t+n,o=[],a=[],g=s.length;for(let _=0;_<g;++_){const d=s[_];if(!d||d.length<2)continue;let u,c=d[0];const f=d.length;for(let x=1;x<f;++x)u=d[x],c.x===u.x&&(c.x<=e&&(c.y>u.y?(o.push(_),o.push(x),o.push(p.sideLeft),o.push(-1)):(a.push(_),a.push(x),a.push(p.sideLeft),a.push(-1))),c.x>=r&&(c.y<u.y?(o.push(_),o.push(x),o.push(p.sideRight),o.push(-1)):(a.push(_),a.push(x),a.push(p.sideRight),a.push(-1)))),c.y===u.y&&(c.y<=h&&(c.x<u.x?(o.push(_),o.push(x),o.push(p.sideTop),o.push(-1)):(a.push(_),a.push(x),a.push(p.sideTop),a.push(-1))),c.y>=l&&(c.x>u.x?(o.push(_),o.push(x),o.push(p.sideBottom),o.push(-1)):(a.push(_),a.push(x),a.push(p.sideBottom),a.push(-1)))),c=u}if(o.length===0||a.length===0)return;P.fillParent(s,a,o),P.fillParent(s,o,a);const y=[];P.calcDeltas(y,a,o),P.calcDeltas(y,o,a),P.addDeltas(y,s)}static fillParent(t,n,s){const e=s.length,r=n.length;for(let h=0;h<r;h+=4){const l=n[h],o=n[h+1],a=n[h+2],g=t[l][o-1],y=t[l][o];let _=8092,d=-1;for(let u=0;u<e;u+=4){if(s[u+2]!==a)continue;const c=s[u],f=s[u+1],x=t[c][f-1],C=t[c][f];switch(a){case p.sideLeft:case p.sideRight:if(M(g.y,x.y,C.y)&&M(y.y,x.y,C.y)){const S=Math.abs(C.y-x.y);S<_&&(_=S,d=u)}break;case p.sideTop:case p.sideBottom:if(M(g.x,x.x,C.x)&&M(y.x,x.x,C.x)){const S=Math.abs(C.x-x.x);S<_&&(_=S,d=u)}}}n[h+3]=d}}static calcDeltas(t,n,s){const e=n.length;for(let r=0;r<e;r+=4){const h=[],l=P.calcDelta(r,n,s,h);t.push(n[r]),t.push(n[r+1]),t.push(n[r+2]),t.push(l)}}static calcDelta(t,n,s,e){const r=n[t+3];if(r===-1)return 0;const h=e.length;return h>1&&e[h-2]===r?0:(e.push(r),P.calcDelta(r,s,n,e)+1)}static addDeltas(t,n){const s=t.length;let e=0;for(let r=0;r<s;r+=4){const h=t[r+3];h>e&&(e=h)}for(let r=0;r<s;r+=4){const h=n[t[r]],l=t[r+1],o=e-t[r+3];switch(t[r+2]){case p.sideLeft:h[l-1].x-=o,h[l].x-=o,l===1&&(h[h.length-1].x-=o),l===h.length-1&&(h[0].x-=o);break;case p.sideRight:h[l-1].x+=o,h[l].x+=o,l===1&&(h[h.length-1].x+=o),l===h.length-1&&(h[0].x+=o);break;case p.sideTop:h[l-1].y-=o,h[l].y-=o,l===1&&(h[h.length-1].y-=o),l===h.length-1&&(h[0].y-=o);break;case p.sideBottom:h[l-1].y+=o,h[l].y+=o,l===1&&(h[h.length-1].y+=o),l===h.length-1&&(h[0].y+=o)}}}};const M=(i,t,n)=>i>=t&&i<=n||i>=n&&i<=t,ht=Number.POSITIVE_INFINITY,B=Math.PI,rt=2*B,Ui=128/B,ki=256/360,ot=B/180,Hi=1/Math.LN2;function Ii(i,t){return(i%=t)>=0?i:i+t}function lt(i){return Ii(i*Ui,256)}function at(i){return Ii(i*ki,256)}function ut(i){return Math.log(i)*Hi}function ct(i,t,n){return i*(1-n)+t*n}const Gi=8,qi=14,Vi=16;function _t(i){return Gi+Math.max((i-qi)*Vi,0)}function xt(i,t,n){let s,e,r,h=0;for(const l of n){s=l.length;for(let o=1;o<s;++o)e=l[o-1],r=l[o],e.y>t!=r.y>t&&((r.x-e.x)*(t-e.y)-(r.y-e.y)*(i-e.x)>0?h++:h--)}return h!==0}function yt(i,t,n,s){let e,r,h,l;const o=s*s;for(const a of n){const g=a.length;if(!(g<2)){e=a[0].x,r=a[0].y;for(let y=1;y<g;++y){if(h=a[y].x,l=a[y].y,$i(i,t,e,r,h,l)<o)return!0;e=h,r=l}}}return!1}function ft(i,t){if(t===0||Number.isNaN(t))return i;const n=[],s=new m(0,0),e=new m(0,0),r=new m(0,0);for(let h=0;h<i.length;h++){const l=i[h],o=[];for(let a=0;a<l.length;a++){const g=l[a-1],y=l[a],_=l[a+1];a===0?s.setCoords(0,0):s.assignSub(y,g).normalize().rightPerpendicular(),a===l.length-1?e.setCoords(0,0):e.assignSub(_,y).normalize().rightPerpendicular(),r.assignAdd(s,e).normalize();const d=r.x*e.x+r.y*e.y;d!==0&&r.scale(1/d),o.push(m.add(y,r.scale(t)))}n.push(o)}return n}function dt(i,t,n,s){const e=new m(i[0],i[1]);if(e.scale(s),t==="viewport"){const r=-n*(Math.PI/180),h=Math.cos(r),l=Math.sin(r);e.rotate(h,l)}return e}export{ni as A,Z as B,Xi as C,O as D,ji as E,xt as I,Ci as K,N as L,yt as N,j as O,ft as P,Zi as R,ui as U,Ji as V,gi as X,Ti as Y,Pi as Z,et as _,Ii as a,dt as b,rt as c,ut as d,D as e,lt as f,_t as g,m as h,T as i,nt as j,Yi as k,J as l,X as m,v as n,B as o,ct as p,ci as q,ht as r,ot as s,E as t,Qi as u,Ki as v,yi as w,at as x,tt as y,it as z};
